---
import { getCollection } from "astro:content";
import Layout from "@layouts/Layout.astro";
import Post from "@components/Post.astro";
import PostView from "@components/PostView.astro";

const allPosts = await getCollection("posts");
const tags = [...new Set(allPosts.map((post) => post.data.tags).flat())];
---

<Layout>
  <div class="tags">
    <p>Topics:</p>
    {tags.map((tag) => <a href={`/posts/${tag}`}>{tag}</a>)}
  </div>

  <PostView />
</Layout>

<style>
  .tags {
    display: flex;
    align-items: center;
    flex-wrap: wrap;
    gap: 1rem;
  }
</style>
